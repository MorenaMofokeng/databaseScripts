DROP TABLE S_REGISTRATION cascade constraints;
DROP TABLE S_STUDENT cascade constraints;
DROP TABLE S_LECTURE cascade constraints;
DROP TABLE S_SUBJECT cascade constraints;
DROP TABLE S_DIPLOMA cascade constraints;
DROP TABLE S_FACULTY cascade constraints;
DROP TABLE S_STAFF cascade constraints;

CREATE TABLE S_STUDENT
(STUDNR NUMBER(8) PRIMARY KEY,
SURNAME VARCHAR2(15) CONSTRAINT CH_STUDENT_SURNAME 
    CHECK(SURNAME=UPPER(SURNAME)),
INITIALS VARCHAR2(15) CONSTRAINT CH_STUDENT_INITIALS
    CHECK(INITIALS=UPPER(INITIALS)),
SEX CHAR(1) CONSTRAINT CH_SEX CHECK (SEX IN ('M','F')),
BIRTHDATE DATE);
                    
CREATE TABLE S_STAFF
(STAFFNR NUMBER(6) PRIMARY KEY,
SURNAME VARCHAR2(15) CONSTRAINT CH_STAFF_SURNAME 
    CHECK(SURNAME=UPPER(SURNAME)),
INITIALS VARCHAR2(4) CONSTRAINT CH_STAFF_INITIALS 
    CHECK(INITIALS=UPPER(INITIALS)),
OFFICE_NR VARCHAR2(3),
JOB VARCHAR2(15) CONSTRAINT CH_STAFF_JOB
    CHECK(JOB=UPPER(JOB)),
SALARY NUMBER(8,2),
BONUS NUMBER(8,2));

CREATE TABLE S_FACULTY
(FAC_CODE CHAR(2) PRIMARY KEY,
FAC_NAME VARCHAR2(32) CONSTRAINT CH_FAC_NAME
    CHECK(FAC_NAME=UPPER(FAC_NAME)),
FAC_HEAD NUMBER(6) REFERENCES S_STAFF(STAFFNR) UNIQUE);

CREATE TABLE S_DIPLOMA
(DIP_CODE CHAR(2) PRIMARY KEY,
DIP_NAME VARCHAR2(25) CONSTRAINT CH_DIP_NAME
    CHECK(DIP_NAME=UPPER(DIP_NAME)),
DIP_HEAD NUMBER(6) REFERENCES S_STAFF(STAFFNR),
FAC_CODE CHAR(2) REFERENCES S_FACULTY(FAC_CODE));
                                             
CREATE TABLE S_SUBJECT
(SUBJ_CODE CHAR(3) PRIMARY KEY,
SUBJ_NAME VARCHAR2(35) CONSTRAINT CH_SUBJ_NAME
    CHECK(SUBJ_NAME=UPPER(SUBJ_NAME)),
SUBJ_FEE NUMBER(6,2) CONSTRAINT CH_SUBJ_FEE
    CHECK(SUBJ_FEE BETWEEN 300 AND 2000),
HEADNR NUMBER(6) REFERENCES S_STAFF(STAFFNR),
DIP_CODE CHAR(2) REFERENCES S_DIPLOMA(DIP_CODE),
PREREQ CHAR(3) REFERENCES S_SUBJECT(SUBJ_CODE));
                                            
CREATE TABLE S_REGISTRATION
(STUDNR NUMBER(8) REFERENCES S_STUDENT(STUDNR),
SUBJ_CODE CHAR(3) REFERENCES S_SUBJECT(SUBJ_CODE),
REG_DATE DATE,
CAMPUS CHAR(1) CONSTRAINT CH_CAMPUS
   CHECK(CAMPUS IN ('M','P','W','K','N')),
CONSTRAINT PK_STUD_SUBJ PRIMARY KEY(STUDNR, SUBJ_CODE));

CREATE TABLE S_LECTURE
(SUBJ_CODE CHAR(3) REFERENCES S_SUBJECT(SUBJ_CODE),
LECTURER_NR NUMBER(6) REFERENCES S_STAFF(STAFFNR),
CONSTRAINT UK_SUBJ_LECT UNIQUE(SUBJ_CODE, LECTURER_NR));

DESCRIBE S_STUDENT;
DESCRIBE S_REGISTRATION;
DESCRIBE S_SUBJECT;
DESCRIBE S_LECTURE;
DESCRIBE S_STAFF;
DESCRIBE S_DIPLOMA;
DESCRIBE S_FACULTY;

/* ####################################################### */

INSERT INTO S_STUDENT VALUES 
( 97003455, 'SMUTS',  'JH',  'M', TO_DATE('12-JAN-70'));
INSERT INTO S_STUDENT VALUES 
( 97003650, 'BARNARD', 'C',  'M', TO_DATE('21-MAY-76'));
INSERT INTO S_STUDENT VALUES 
( 96004450, 'MKASI',   'GM', 'F', TO_DATE('21-MAY-76'));
INSERT INTO S_STUDENT VALUES 
( 96445566, 'SLEEPY',  'AL', 'F', TO_DATE('07-APR-72'));
INSERT INTO S_STUDENT VALUES 
( 95665432, 'MASHILE', 'W',  'M', TO_DATE('21-NOV-73'));
INSERT INTO S_STUDENT VALUES 
( 97000001, 'SMIT',    'N',  'M', TO_DATE('09-JUL-76'));
INSERT INTO S_STUDENT VALUES 
( 97000003, 'SMUTS',   'JJ', 'F', TO_DATE('11-APR-73'));
INSERT INTO S_STUDENT VALUES 
( 96661111, 'SMYTHE',  'P',  'F', TO_DATE('23-JUL-77'));
INSERT INTO S_STUDENT VALUES 
( 94535353, 'SMITH',   'TF', 'F', TO_DATE('21-NOV-74'));
INSERT INTO S_STUDENT VALUES 
( 94535354, 'SMITH',   'H',  'M', TO_DATE('21-NOV-74'));
INSERT INTO S_STUDENT VALUES 
( 94000001, 'SMITH',   'VM', 'M', TO_DATE('03-DEC-76'));
INSERT INTO S_STUDENT VALUES 
( 94001111, 'PETOORS', 'WHY','M', TO_DATE('03-DEC-75'));


SELECT 'END OF STUDENT' FROM DUAL;

/* ####################################################### */

INSERT INTO  S_STAFF VALUES
( 513500, 'OLIVIER',       'G',    '213', 'LECTURER',    78000,   NULL);
INSERT INTO  S_STAFF VALUES
( 513600, 'VENTER',        'PJ',   '209', 'LECTURER',    84000,   NULL);
INSERT INTO  S_STAFF VALUES
( 513700, 'PRETORIUS',     'BB',   '210', 'LECTURER',    90000,   6000);
INSERT INTO  S_STAFF VALUES
( 800700, 'BUYS',          'TR',   'S22', 'DEAN',       144000,  18000);
INSERT INTO  S_STAFF VALUES
( 600700, 'VAN DER MERWE', 'KOOS', 'A20', 'LECTURER',   132000,  12000);
INSERT INTO  S_STAFF VALUES
( 500121, 'MHLANGA',       'NL',   'S34', 'ASSISTANT',   24000,   1800);
INSERT INTO  S_STAFF VALUES
( 500223, 'WOLFF',         'AR',   'S34', 'ASSISTANT',   18000,  12000);
INSERT INTO  S_STAFF VALUES
( 622000, 'ERASMUS',       'HG',   'S30', 'LECTURER',    90000,    624);
INSERT INTO  S_STAFF VALUES
( 400300, 'MASEKO',        'JB',   'A21', 'DEAN',       180000,  48000);
INSERT INTO  S_STAFF VALUES
( 622300, 'PRETORIUS',     'CM',   'S33', 'LECTURER',   108000,  12600);
INSERT INTO  S_STAFF VALUES
( 502501, 'MORGAN',        'I',    'C33', 'LECTURER',    72000,   NULL);
INSERT INTO  S_STAFF VALUES
( 333444, 'COETZEE',       'HHH',  'S34', 'LECTURER',    72800,   1200);
INSERT INTO  S_STAFF VALUES
( 500001, 'COETZEE',       'R',    'S35',       NULL,     NULL,   NULL);
INSERT INTO  S_STAFF VALUES
( 500445, 'NKOSI',         'RN',   'S36', 'LECTURER',    72800,   1200);
INSERT INTO  S_STAFF VALUES
( 500111, 'HONEYBALL',     'PA',   'C34', 'LECTURER',     NULL,   NULL);
INSERT INTO  S_STAFF VALUES
( 500222, 'HONEYBALL',     'MA',   'X54', 'SPECIALIST', 120000,   NULL);
INSERT INTO  S_STAFF VALUES
( 000007, 'BOND',          'J',    'X21', 'SPECIALIST', 360000, 120000);
INSERT INTO  S_STAFF VALUES
( 111111, 'LAZYBOY',       'VERY', 'X21', 'SPECIALIST', NULL,    84000);
INSERT INTO  S_STAFF VALUES
( 200200, 'LUBAMBU',       'P',    'A11', 'CLERK',       24000,   1200);
INSERT INTO  S_STAFF VALUES
( 200300, 'NKAMBULE',      'F',    'A12', 'CLERK',       30000,   1800);
INSERT INTO  S_STAFF VALUES
( 765000, 'WOODRIDGE',     'SAW',  'B30', 'ARTISAN',     60000,   NULL);
INSERT INTO  S_STAFF VALUES
( 400111, 'RICHMOND',      'M',    'C30', 'LECTURER',    54000,    600);
INSERT INTO  S_STAFF VALUES
( 765001, 'STEEL',         'PIPE', 'B30', 'ARTISAN',     54000,    600);
INSERT INTO  S_STAFF VALUES
( 800115, 'READY',         'B',    'L10', 'LIBRARIAN',   24000,   1200);
INSERT INTO  S_STAFF VALUES
( 800116, 'BARENDSEN',     'PP',   'L10', 'LIBRARIAN',   30000,   NULL);
INSERT INTO  S_STAFF VALUES
( 800117, 'DE WET',        'MA',   'L10', 'LIBRARIAN',   36000,   NULL);
INSERT INTO  S_STAFF VALUES
( 800118, 'DE WET',        'PA',   'L10', 'LIBRARIAN',   36000,   NULL);
INSERT INTO  S_STAFF VALUES
( 808080, 'ELS',           'P',    'C05', 'CLEANER',     12000,    600);
INSERT INTO  S_STAFF VALUES
( 808081, 'NKOSI',         'S',    'Z99', 'CLEANER',     60000,  72000);
INSERT INTO  S_STAFF VALUES
( 808082, 'JANSEN',        'PT',   'C05', 'CLEANER',     12600,   1200);
INSERT INTO  S_STAFF VALUES
( 808083, 'BASSON',        'S',    'C05', 'CLEANER',     15000,   NULL);
INSERT INTO  S_STAFF VALUES
( 900001, 'ENGELBRECHT',   'FJ',   'D11', 'DIRECTOR',   240000,  48000);
INSERT INTO S_STAFF VALUES
( 900002, 'DU PLESSIS',    'FR',   'D12', 'DIRECTOR',   144000,   NULL);
INSERT INTO  S_STAFF VALUES
( 900003, 'NKOSI',         'MM',   'D13', 'DIRECTOR',   138000,  12000);
INSERT INTO  S_STAFF VALUES
( 955669, 'MARAIS',        'B',    'A01', 'RECTOR',     132000,   NULL);
INSERT INTO  S_STAFF VALUES
( 334455, 'NKOSI',         'HJ',   'S21', 'LECTURER',   132000,   NULL);

SELECT 'END OF STAFF' FROM DUAL;

/* ####################################################### */

INSERT INTO  S_FACULTY VALUES
( 'IS', 'FACULTY OF INFORMATION SCIENCES', 800700);
INSERT INTO  S_FACULTY VALUES
( 'AR', 'ARTS FACULTY',                    600700);
INSERT INTO  S_FACULTY VALUES
( 'EN', 'FACULTY OF ENGINEERING',          NULL);
INSERT INTO  S_FACULTY VALUES
( 'ES', 'ECONOMIC SCIENCES',               NULL);
INSERT INTO  S_FACULTY VALUES
( 'NS', 'NATURAL SCIENCES',                400300);

SELECT 'END OF FACULTY' FROM DUAL;

/* ####################################################### */

INSERT INTO  S_DIPLOMA VALUES
( 'IT', 'INFORMATION TECHNOLOGY',    513700, 'IS');
INSERT INTO  S_DIPLOMA VALUES
( 'HT', 'HIGH-FREQUENCY TECHNOLOGY', 400300, 'NS');
INSERT INTO  S_DIPLOMA VALUES
( 'CM', 'COST AND MANAGEMENT',       400111, 'ES');
INSERT INTO  S_DIPLOMA VALUES
( 'EE', 'ELECTRICAL ENGINEERING',    900001, 'EN');
INSERT INTO  S_DIPLOMA VALUES
( 'CA', 'COMMERCIAL ADMINISTRATION', 900003, 'IS');
INSERT INTO  S_DIPLOMA VALUES
( 'CS', 'COMPUTER SCIENCE',          900003, 'IS');

SELECT 'END OF DIPLOMA' FROM DUAL;

/* ####################################################### */

INSERT INTO  S_SUBJECT VALUES
( 'IS1', 'INFORMATION SYSTEMS 1',            1200, 513500, 'IT',  NULL);
INSERT INTO  S_SUBJECT VALUES
( 'IS2', 'INFORMATION SYSTEMS 2',            1300, 513600, 'IT', 'IS1');
INSERT INTO  S_SUBJECT VALUES
( 'IS3', 'INFORMATION SYSTEMS 3',            1400, 513700, 'IT', 'IS2');
INSERT INTO  S_SUBJECT VALUES
( 'DS1', 'DEVELOPMENT SOFTWARE 1',           1400, 513500, 'IT',  NULL);
INSERT INTO  S_SUBJECT VALUES
( 'DS2', 'DEVELOPMENT SOFTWARE 2',           1600, 622000, 'IT', 'DS1');
INSERT INTO  S_SUBJECT VALUES
( 'DS3', 'DEVELOPMENT SOFTWARE 3',           1800, 622300, 'IT', 'DS2');
INSERT INTO  S_SUBJECT VALUES
( 'SP1', 'SYSTEMS PROGRAMMING 1',            1400, 333444, 'IT', 'IS1');
INSERT INTO  S_SUBJECT VALUES
( 'FS1', 'FINANCIAL SKILLS 1',               1000, 500001, 'IT',  NULL);
INSERT INTO  S_SUBJECT VALUES
( 'QT1', 'QUANTITATIVE TECHNIQUES 1',        1300, 500445, 'IT',  NULL);
INSERT INTO  S_SUBJECT VALUES
( 'OR3', 'OPERATIONAL RESEARCH 3',           1900, 500445, 'IT', 'QT1');
INSERT INTO  S_SUBJECT VALUES
( 'MI3', 'MANAGEMENT INFORMATION SYSTEMS 3', 1900, 500445, 'IT', 'IS2');
INSERT INTO  S_SUBJECT VALUES
( 'TP1', 'TECHNICAL PROGRAMMING 1',          1600, 500001, 'IT',  NULL);

INSERT INTO  S_SUBJECT VALUES
( 'FA1', 'FINANCIAL ACCOUNTING 1',            700,   NULL, 'CM',  NULL);
INSERT INTO  S_SUBJECT VALUES
( 'FA2', 'FINANCIAL ACCOUNTING 2',            800, 500001, 'CM', 'FA1');
INSERT INTO  S_SUBJECT VALUES
( 'CM1', 'COST AND MANAGEMENT ACC 1',           600, 400111, 'CM',  NULL);
INSERT INTO  S_SUBJECT VALUES
( 'CM2', 'COST AND MANAGEMENT ACC 2',           800, 400111, 'CM', 'CM1');
INSERT INTO  S_SUBJECT VALUES         
( 'CM3', 'COST AND MANAGEMENT ACC 3',          1000, 400111, 'CM', 'CM2');
INSERT INTO  S_SUBJECT VALUES
( 'IA1', 'INTERNAL AUDITING 1',               500, 502501, 'CM',  NULL);
INSERT INTO  S_SUBJECT VALUES
( 'POI', 'PRICIPLES OF INFORMATION SYSTEMS', 1200, 513500, 'CM',  NULL);


SELECT 'END OF SUBJECT' FROM DUAL;
                                            
/* ####################################################### */

INSERT INTO  S_REGISTRATION VALUES
( 97003455, 'IS1', TO_DATE('10-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 97003455, 'DS1', TO_DATE('10-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 97003455, 'TP1', TO_DATE('10-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 97003455, 'QT1', TO_DATE('10-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 97003455, 'FS1', TO_DATE('10-JAN-97'), 'W');
INSERT INTO  S_REGISTRATION VALUES
( 97003455, 'SP1', TO_DATE('10-JAN-97'), 'W');

INSERT INTO  S_REGISTRATION VALUES
( 94000001, 'FA1', TO_DATE('17-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 94000001, 'CM1', TO_DATE('17-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 94000001, 'IA1', TO_DATE('17-JAN-97'), 'N');

INSERT INTO  S_REGISTRATION VALUES
( 97003650, 'FA1', TO_DATE('20-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 97003650, 'CM1', TO_DATE('20-JAN-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 97003650, 'IA1', TO_DATE('20-JAN-97'), 'N');

INSERT INTO  S_REGISTRATION VALUES
( 96004450, 'FA2', TO_DATE('10-FEB-97'), 'N');
INSERT INTO  S_REGISTRATION VALUES
( 96004450, 'CM2', TO_DATE('10-FEB-97'), 'N');

INSERT INTO  S_REGISTRATION VALUES
( 96445566, 'DS2', TO_DATE('10-JAN-97'), 'W');
INSERT INTO  S_REGISTRATION VALUES
( 96445566, 'IS1', TO_DATE('10-JAN-97'), 'W');
INSERT INTO  S_REGISTRATION VALUES
( 96445566, 'SP1', TO_DATE('10-JAN-97'), 'W');
INSERT INTO  S_REGISTRATION VALUES
( 96445566, 'FS1', TO_DATE('10-FEB-97'), 'W');
INSERT INTO  S_REGISTRATION VALUES
( 96445566, 'QT1', TO_DATE('10-FEB-97'), 'W');
INSERT INTO  S_REGISTRATION VALUES
( 96445566, 'OR3', TO_DATE('10-FEB-97'), 'W');

INSERT INTO  S_REGISTRATION VALUES
( 94001111, 'IA1', NULL,                 'W');

SELECT 'END OF REGISTRATION' FROM DUAL;


/* ####################################################### */

INSERT INTO  S_LECTURE VALUES
( 'IS1', 513600);
INSERT INTO  S_LECTURE VALUES
( 'IS1', 500121);
INSERT INTO  S_LECTURE VALUES
( 'IS2', 513500);
INSERT INTO  S_LECTURE VALUES
( 'IS3', 513700);
INSERT INTO  S_LECTURE VALUES
( 'DS1', 500223);
INSERT INTO  S_LECTURE VALUES
( 'DS2', 622000);
INSERT INTO  S_LECTURE VALUES
( 'DS2', 622300);
INSERT INTO  S_LECTURE VALUES
( 'DS3', 622300);
INSERT INTO  S_LECTURE VALUES
( 'SP1', 333444);
INSERT INTO  S_LECTURE VALUES
( 'FS1', 400111);

INSERT INTO  S_LECTURE VALUES
( 'QT1', 500445);
INSERT INTO  S_LECTURE VALUES
( 'OR3', 500445);

INSERT INTO  S_LECTURE VALUES
( 'CM1', 400111);
INSERT INTO  S_LECTURE VALUES
( 'CM2', 400111);
INSERT INTO  S_LECTURE VALUES
( 'CM3', 400111);
INSERT INTO  S_LECTURE VALUES
( 'FA1', 500001);
INSERT INTO  S_LECTURE VALUES
( 'IA1', 502501);
INSERT INTO  S_LECTURE VALUES
( 'POI', 513500);
INSERT INTO  S_LECTURE VALUES
( 'POI', 513600);

commit;

ALTER TABLE S_REGISTRATION
ADD finalmark NUMBER(2);

update S_REGISTRATION
set finalmark = 54
where studnr = 96445566
and subj_code = 'DS2';

update S_REGISTRATION
set finalmark = 56
where studnr = 97003455
and subj_code = 'IS1';

update S_REGISTRATION
set finalmark = 84
where studnr = 97003455 
and subj_code = 'DS1';

update S_REGISTRATION
set finalmark = 51
where studnr = 97003455
and subj_code = 'TP1';

update S_REGISTRATION
set finalmark = 51
where studnr = 97003455 
and subj_code = 'QT1';

update S_REGISTRATION
set finalmark = 59
where studnr = 97003455 
and subj_code = 'FS1';

update S_REGISTRATION
set finalmark = 84
where studnr = 97003455
and subj_code = 'SP1';

update S_REGISTRATION
set finalmark = 77
where studnr = 94000001
and subj_code = 'FA1';

update S_REGISTRATION
set finalmark = 49
where studnr = 94000001 
and subj_code = 'CM1';

update S_REGISTRATION
set finalmark = 91
where studnr = 94000001 
and subj_code = 'IA1';

update S_REGISTRATION
set finalmark = 54
where studnr = 97003650
and subj_code = 'FA1';

update S_REGISTRATION
set finalmark = 67
where studnr = 97003650 
and subj_code = 'CM1';

update S_REGISTRATION
set finalmark = 50
where studnr = 97003650 
and subj_code = 'IA1';

update S_REGISTRATION
set finalmark = 62
where studnr = 96004450 
and subj_code = 'FA2';

update S_REGISTRATION
set finalmark = 88
where studnr = 96004450 
and subj_code = 'CM2';

update S_REGISTRATION
set finalmark = 49
where studnr = 96445566 
and subj_code = 'DS2';

update S_REGISTRATION
set finalmark = 71
where studnr = 96445566 
and subj_code = 'IS1';

update S_REGISTRATION
set finalmark = 57
where studnr = 96445566 
and subj_code = 'SP1';

update S_REGISTRATION
set finalmark = 76
where studnr = 96445566 
and subj_code = 'FS1';

update S_REGISTRATION
set finalmark = 54
where studnr = 96445566 
and subj_code = 'QT1';

update S_REGISTRATION
set finalmark = 53
where studnr = 96445566 
and subj_code = 'OR3';

update S_REGISTRATION
set finalmark = 69
where studnr = 94001111
and subj_code = 'IA1';

commit;
/


